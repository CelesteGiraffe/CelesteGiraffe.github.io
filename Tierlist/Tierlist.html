<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Tier List Â· Celeste Artley</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <script src="../js/navigation.js" defer></script>
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body class="tierlist-body">
    <nav>
      <div class="container">
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="../about.html">About</a></li>
          <li><a href="../game-developer.html">Game Developer</a></li>
          <li><a href="../web-developer.html">Web Developer</a></li>
          <li><a href="../backend-developer.html">Backend Developer</a></li>
          <li><a href="../fullstack-developer.html">Full-Stack Developer</a></li>
          <li><a href="../custom.html">Custom Filter</a></li>
        </ul>
      </div>
    </nav>

    <div class="container tierlist-page">
      <section class="tierlist-card board-card">
        <div class="tierlist-card-header">
          <h2>Tier Board</h2>
          <span class="device-indicator">Single-column, drag-friendly layout</span>
        </div>

        <div class="tier-board">
          <div id="tier-S" class="tier-row S">
            <button class="select-row btn btn-secondary btn-compact">Select</button>
            <h3>S Tier</h3>
          </div>
          <div id="tier-A" class="tier-row A">
            <button class="select-row btn btn-secondary btn-compact">Select</button>
            <h3>A Tier</h3>
          </div>
          <div id="tier-B" class="tier-row B">
            <button class="select-row btn btn-secondary btn-compact">Select</button>
            <h3>B Tier</h3>
          </div>
          <div id="tier-C" class="tier-row C">
            <button class="select-row btn btn-secondary btn-compact">Select</button>
            <h3>C Tier</h3>
          </div>
          <div id="tier-D" class="tier-row D">
            <button class="select-row btn btn-secondary btn-compact">Select</button>
            <h3>D Tier</h3>
          </div>
          <div id="tier-F" class="tier-row F">
            <button class="select-row btn btn-secondary btn-compact">Select</button>
            <h3>F Tier</h3>
          </div>
        </div>
      </section>
    </div>

    <div class="tierlist-toolbox" aria-label="Tier list toolbox">
      <div class="toolbox-inner">
        <div class="toolbox-controls toolbox-panel" id="toolbox-controls-panel">
          <div class="toolbox-instructions">
            <p>Quick reference</p>
            <ul>
              <li>Drag tiles into any tier</li>
              <li>Tap tile to spotlight</li>
              <li>Use arrow keys after selecting</li>
            </ul>
          </div>
          <div class="tier-create" aria-label="Add new tier">
            <input
              type="text"
              class="tiername"
              id="newTierName"
              placeholder="New tier name"
              aria-label="New tier name"
            />
            <button class="btn btn-primary btn-icon" id="addTier" aria-label="Add tier">+</button>
          </div>
          <div class="toolbox-actions">
            <a href="pre-loader.html" class="btn btn-secondary btn-compact">Image Loader</a>
            <button class="btn btn-success btn-compact" id="shareTier">Share</button>
          </div>
        </div>
        <div class="toolbox-strip" aria-label="Image pool">
          <div id="images" class="image-strip"></div>
        </div>
        <div class="toolbox-mobile-actions" aria-label="Toolbox panel toggles">
          <button type="button" class="btn btn-secondary btn-compact toolbox-toggle" data-toolbox-panel="toolbox-controls-panel" aria-expanded="false">
            Controls
          </button>
          <button type="button" class="btn btn-secondary btn-compact toolbox-toggle" data-toolbox-panel="large-image-container" aria-expanded="false">
            Preview
          </button>
        </div>
        <div id="large-image-container" class="toolbox-preview toolbox-panel" aria-live="polite">
          <span class="preview-placeholder">Select a tile</span>
          <img id="large-image" alt="Selected tile preview" />
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <p>&copy; 2024 Celeste Artley. All rights reserved.</p>
      </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
      const imageLinks = JSON.parse(localStorage.getItem("imageUrls") || "[]");
      imageLinks.forEach((link, index) => {
        const imgElement = `<div class="image-square"><img src="${link}" alt="Image ${
          index + 1
        }"></div>`;
        $("#images").append(imgElement);
      });

      $(".image-square").draggable({
        revert: "invalid",
      });
    </script>
    <script src="../js/jquery.ui.touch-punch.min.js"></script>
    <script src="tierlist.js"></script>
    <script src="../js/tryableProjects.js"></script>
    <script>
      (() => {
        const mobileQuery = window.matchMedia('(max-width: 768px)');
        const toggleButtons = document.querySelectorAll('.toolbox-toggle[data-toolbox-panel]');
        if (!toggleButtons.length) {
          return;
        }

        const panels = new Map();
        const buttons = new Map();
        toggleButtons.forEach((button) => {
          const targetId = button.getAttribute('data-toolbox-panel');
          const panel = document.getElementById(targetId);
          if (panel) {
            panels.set(targetId, panel);
            buttons.set(targetId, button);
            button.setAttribute('aria-expanded', 'false');
          }
        });

        if (!panels.size) {
          return;
        }

        const resetPanels = () => {
          panels.forEach((panel) => panel.classList.remove('is-visible'));
          buttons.forEach((button) => button.setAttribute('aria-expanded', 'false'));
        };

        const showPanel = (panelId) => {
          const panel = panels.get(panelId);
          const button = buttons.get(panelId);
          if (!panel || !button) {
            return;
          }
          panel.classList.add('is-visible');
          button.setAttribute('aria-expanded', 'true');
        };

        const handleButtonClick = (event) => {
          const button = event.currentTarget;
          const targetId = button.getAttribute('data-toolbox-panel');
          const panel = panels.get(targetId);
          if (!panel) {
            return;
          }

          if (!mobileQuery.matches) {
            panel.scrollIntoView({ behavior: 'smooth', block: 'center' });
            return;
          }

          const isActive = panel.classList.contains('is-visible');
          resetPanels();

          if (!isActive) {
            showPanel(targetId);
          }
        };

        toggleButtons.forEach((button) => {
          button.addEventListener('click', handleButtonClick);
        });

        const showDefaultPanel = () => {
          const defaultButton = toggleButtons[0];
          if (mobileQuery.matches && defaultButton) {
            const targetId = defaultButton.getAttribute('data-toolbox-panel');
            showPanel(targetId);
          }
        };

        const handleViewportChange = () => {
          resetPanels();
          if (!mobileQuery.matches) {
            return;
          }
          showDefaultPanel();
        };

        handleViewportChange();

        if (typeof mobileQuery.addEventListener === 'function') {
          mobileQuery.addEventListener('change', handleViewportChange);
        } else if (typeof mobileQuery.addListener === 'function') {
          mobileQuery.addListener(handleViewportChange);
        }
      })();
    </script>
  </body>
</html>
